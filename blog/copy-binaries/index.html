<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=UTF-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1,user-scalable=no" name=viewport><meta content="index, follow" name=robots><title>Batch script for Copying Binaries</title><meta content="Batch script for Copying Binaries" name=title><meta content=Karthik name=author><meta content="Personal Commentary" name=description><meta content=website property=og:type><meta content=https://Karthik-d-k.github.io/blog/copy-binaries/ property=og:url><meta content=0x646b property=og:site_name><meta content="Batch script for Copying Binaries" property=og:title><meta content="Personal Commentary" property=og:description><meta content=https://Karthik-d-k.github.io/favicon.ico property=og:image><meta content=summary_large_image property=twitter:card><meta content=https://Karthik-d-k.github.io/blog/copy-binaries/ property=twitter:url><meta content="Batch script for Copying Binaries" property=twitter:title><meta content="Personal Commentary" property=twitter:description><meta content=https://Karthik-d-k.github.io/favicon.ico property=twitter:image><link href=https://Karthik-d-k.github.io/blog/copy-binaries/ rel=canonical><link rel="shortcut icon" href=https://Karthik-d-k.github.io/favicon.ico type=image/x-icon><link href=https://Karthik-d-k.github.io/atom.xml rel=alternate title=RSS type=application/atom+xml><link href=https://speyll.github.io/suCSS/reset-min.css rel=stylesheet><link href=https://speyll.github.io/suCSS/suCSS-min.css rel=stylesheet><link href=https://Karthik-d-k.github.io/css/style.css rel=stylesheet><script defer src=https://Karthik-d-k.github.io/js/script.js></script><body><header><nav id=nav-bar><a href=/> /home </a><a href=/blog> /blog </a><a href=/til> /til </a><a href=/projects> /projects </a><a href=/tags> /tags </a><a href=/bookmarks> /bookmarks </a><a href=/cv> /cv </a><div><input id=theme-toggle style=display:none type=checkbox><label for=theme-toggle id=theme-toggle-label><svg class=icons id=theme-icon><use href=https://Karthik-d-k.github.io/icons.svg#lightMode></use></svg></label><audio id=theme-sound><source src=https://Karthik-d-k.github.io/click.ogg type=audio/ogg></audio></div></nav></header><main><h1>Batch script for Copying Binaries</h1><h2 id=context>Context</h2><p>I got tired of manually copying the necessary files from the build project folder. Additionally, I had to copy the zipped project content to the destination folder every time I delivered a project. To streamline this process, I decided to automate the task using a Windows batch script as my development operating system is Windows.<h2 id=problem>Problem</h2><p>Write a windows batch script to automate zipping the content and also copying the files.<h2 id=solution>Solution</h2><p>I have <code>7-zip</code> installed in my machine so i use this tool to zip the contents and <code>xcopy</code>, an inbuilt tool in windows is used for copying the files. I will explain each part of the script below.<p>First and foremost thing in batch scripts is to turn off outputting the commands run but for debugging purpose, we can comment-out/delete this line<pre class=language-bat data-lang=bat style=color:#c0c5ce;background-color:#2b303b><code class=language-bat data-lang=bat><span>@</span><span style=color:#b48ead>ECHO</span><span> off
</span></code></pre><p>Change directory to the folder where the script is placed (ideally PROJECT root) using <code>%~dp0</code>, %0 refers to the batch file. Set destination to new folder <code>_share</code> inside root directory or to any folder to your needs<pre class=language-bat data-lang=bat style=color:#c0c5ce;background-color:#2b303b><code class=language-bat data-lang=bat><span style=color:#b48ead>CD </span><span>%</span><span style=color:#bf616a>~dp0
</span><span>
</span><span style=color:#b48ead>SET </span><span style=color:#bf616a>dest</span><span>=%</span><span style=color:#bf616a>cd</span><span>%</span><span style=color:#a3be8c>\_share
</span></code></pre><p>Next, extract the PROJECT folder name and zip its contents using <code>7-zip</code>. I donâ€™t have clear understanding of how code line for extracting folder name works, this was made possible by googling and chatting with chatgpt for a day :)<pre class=language-bat data-lang=bat style=color:#c0c5ce;background-color:#2b303b><code class=language-bat data-lang=bat><span style=color:#b48ead>FOR </span><span style=color:#96b5b4>%%</span><span>F in ("%</span><span style=color:#bf616a>CD</span><span>%") DO </span><span style=color:#b48ead>SET </span><span>"</span><span style=color:#bf616a>PROJECT_name</span><span>=</span><span style=color:#96b5b4>%%</span><span style=color:#a3be8c>~nxF</span><span>"
</span><span>
</span><span>7z a ..\%</span><span style=color:#bf616a>PROJECT_name</span><span>%.zip %</span><span style=color:#bf616a>cd</span><span>%\
</span></code></pre><p>Set all the required files that you want to copy using <code>SET</code> and copy using <code>xcopy</code>. <code>/y</code> option is used to accept to copy the files by default.<pre class=language-bat data-lang=bat style=color:#c0c5ce;background-color:#2b303b><code class=language-bat data-lang=bat><span style=color:#b48ead>SET </span><span style=color:#bf616a>zip</span><span>=%</span><span style=color:#bf616a>CD</span><span>%</span><span style=color:#a3be8c>\..\</span><span>%</span><span style=color:#bf616a>PROJECT_name</span><span>%</span><span style=color:#a3be8c>.zip
</span><span style=color:#b48ead>SET </span><span style=color:#bf616a>hex</span><span>=%</span><span style=color:#bf616a>CD</span><span>%</span><span style=color:#a3be8c>\bin\</span><span>%</span><span style=color:#bf616a>PROJECT_name</span><span>%</span><span style=color:#a3be8c>.hex
</span><span style=color:#b48ead>SET </span><span style=color:#bf616a>config</span><span>=%</span><span style=color:#bf616a>CD</span><span>%</span><span style=color:#a3be8c>\gen\</span><span>%</span><span style=color:#bf616a>PROJECT_name</span><span>%</span><span style=color:#a3be8c>.xml
</span><span style=color:#65737e>:: etc ...
</span><span>
</span><span style=color:#65737e>:: Copy files using xcopy
</span><span style=color:#b48ead>FOR </span><span style=color:#96b5b4>%%</span><span>F in (%</span><span style=color:#bf616a>zip</span><span>%, %</span><span style=color:#bf616a>hex</span><span>%, %</span><span style=color:#bf616a>config</span><span>%) DO </span><span style=color:#b48ead>xcopy </span><span style=color:#96b5b4>%%</span><span>F %</span><span style=color:#bf616a>dest</span><span>%\ /y
</span></code></pre><p>Use <code>pause</code> before exiting the program, so that you can see which files are copied in the standard output window<pre class=language-bat data-lang=bat style=color:#c0c5ce;background-color:#2b303b><code class=language-bat data-lang=bat><span style=color:#65737e>:: pause to see the stdout
</span><span style=color:#b48ead>pause
</span><span>
</span><span style=color:#b48ead>exit</span><span> /b </span><span style=color:#d08770>0
</span></code></pre><h2 id=conclusion>Conclusion</h2><ul><li>Full script is available on github <a href=https://github.com/Karthik-d-k/Karthik-d-k.github.io/blob/main/content/scripts/copy_binaries.bat rel=noopener target=_blank><strong>copy_binaries.bat</strong></a></ul><p class=tags-data><a href=/tags/batch>/batch/</a> <a href=/tags/script>/script/</a></main><footer><hr><footer id=footer><div id=contact-icons><a rel="noopener noreferrer" title="Subscribe via RSS for updates." class=no-style href=atom.xml target=_blank> <span class=iconify data-icon=solar:atom-bold></span> </a><a class=no-style href=mailto:karthikdk1998@gmail.com target=_blank title=Email> <span class=iconify data-icon=mdi:email></span> </a><a rel="noopener noreferrer" class=no-style href=https://github.com/Karthik-d-k target=_blank title=GitHub> <span class=iconify data-icon=mdi:github></span> </a><a rel="noopener noreferrer" class=no-style href=https://x.com/Karthik_d_k target=_blank title=Twitter> <span class=iconify data-icon=mdi:twitter></span> </a><a rel="noopener noreferrer" class=no-style href=https://www.linkedin.com/in/karthik-d-k-319853166 target=_blank title=LinkedIn> <span class=iconify data-icon=mdi:linkedin></span> </a></div><script src=https://code.iconify.design/2/2.2.1/iconify.min.js></script></footer></footer>